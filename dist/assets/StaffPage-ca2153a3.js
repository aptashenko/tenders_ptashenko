import{i as u,c as C,o as _,a as d,b as e,F as h,j as y,t as n,u as c,I as m,J as g,M as x,e as A}from"./index-93ced3f1.js";import{u as F}from"./useDateFormat-57ab88d4.js";import{u as J}from"./useAmountFormat-7c9943da.js";import"./_commonjsHelpers-725317a4.js";const O={class:"crm"},$=e("div",{class:"crm__head"},[e("div",{class:"crm__head-card"},[e("p",null," Найближчий тендер: UA-2021-20-12-13-1 "),e("p",null," Відповідальний: Артем Пташенко "),e("p",null," Залишилось часу: 2г 5хв "),e("p",null," Статус: Завантаження ")]),e("div",{class:"crm__head-card"},[e("p",null," Найближчий тендер: UA-2021-20-12-13-1 "),e("p",null," Відповідальний: Артем Пташенко "),e("p",null," Залишилось часу: 4г 5хв "),e("p",null," Статус: Підготовка документів ")])],-1),U={class:"table"},B={class:"table__tabs"},P=["onClick"],T=e("li",{class:"table__tab-search"},[e("input",{type:"text",placeholder:"Пошук..."})],-1),V={class:"table__body"},j=["onClick"],E={class:"table__body-card"},L={class:"table__body-card-part"},R={class:"table__body-card-title"},W={class:"table__body-card-part"},q=e("p",null," Замовник: ТОВ ХХХХ ",-1),z={class:"table__body-card-part-resp"},G={class:"table__body-card"},H=["onInput"],K=e("option",null,"Не назначено",-1),Q=["value"],X={class:"table__body-card-part"},Z={class:"table__body-card-part"},ee=e("p",null," Статус: Не оплачено ",-1),se=e("div",{class:"table__body-card-part"},[e("p",null," Дата: 11.10.2023 "),e("p",null," Дата: - ")],-1),te={__name:"index",setup(D){const{setDateFormat:p}=F(),{formatAmount:r}=J(),v=[{id:1,name:"Артем П."},{id:2,name:"Дарина Р."}],b=u(0),i=u([]),I=u(JSON.parse(localStorage.getItem("staff_payments"))||[]),S=a=>{const t=i.value.findIndex(s=>s===a);t>=0?i.value.splice(t,1):i.value.push(a)},M=(a,t)=>{const s=o.value.findIndex(l=>l.tenderID===t.tenderID);if(s!==-1){const l=Number(a.target.value),f=[...o.value];I.value.find(w=>w.id===t.tenderID).customer=Number(a.target.value),localStorage.setItem("staff_payments",JSON.stringify(I.value)),f.splice(s,1,{...f[s],resp_id:l}),o.value=f,localStorage.setItem("in_work",JSON.stringify(o.value))}},o=u(JSON.parse(localStorage.getItem("in_work"))||[]),k=a=>{b.value=a},N=C(()=>b.value?o.value.filter(a=>a.resp_id===b.value):o.value),Y=a=>{var t;return(t=v.find(s=>s.id===a))==null?void 0:t.name};return(a,t)=>(_(),d("div",O,[$,e("div",U,[e("ul",B,[e("li",{class:"table__tab",onClick:t[0]||(t[0]=s=>k(0))}," Всі "),(_(),d(h,null,y(v,s=>e("li",{key:s.id,class:"table__tab",onClick:l=>k(s.id)},n(s.name),9,P)),64)),T]),e("ul",V,[(_(!0),d(h,null,y(N.value,s=>(_(),d("li",{key:s.id,class:"table__body-rows",onClick:l=>S(s.id)},[e("div",E,[e("div",L,[e("h2",R,n(s.title),1),e("p",null," Кінцквий строк: "+n(c(p)(s.next_check,"DD MMMM YYYY")||c(p)(s.date,"DD MMMM YYYY")),1)]),e("div",W,[q,e("p",null," Вартість: "+n(c(r)(s.value.amount,s.value.currency)),1)]),e("div",z,[e("p",null," ID: "+n(s.tenderID),1),e("div",G,[m(e("p",null," Відповідальний: "+n(Y(s.resp_id)),513),[[g,s.resp_id]]),m(e("select",{class:"table__body-card-resp-input",onClick:t[1]||(t[1]=x(()=>{},["stop"])),onInput:l=>M(l,s)},[K,(_(),d(h,null,y(v,l=>e("option",{value:l.id},n(l.name),9,Q)),64))],40,H),[[g,!s.resp_id]])])])]),m(e("div",{class:"table__body-card-details",onClick:t[2]||(t[2]=x(()=>{},["stop"]))},[e("div",X,[e("p",null,"Вартість: "+n(c(r)(s.payment,"грн")),1),e("p",null,"Витрати: "+n(c(r)(1e3,"грн")),1)]),e("div",Z,[e("p",null," Статус: "+n(s.is_paid?"Оплачено":"Не оплачено"),1),ee]),se],512),[[g,i.value.includes(s.id)]])],8,j))),128))])])]))}};const ae={class:"staff-page"},de={__name:"StaffPage",setup(D){return(p,r)=>(_(),d("div",ae,[A(te)]))}};export{de as default};
